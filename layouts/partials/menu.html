{{ $url := .Permalink }}
<div id="drawer">
  <div class="steps">
    <ol>
      {{ $scratch := newScratch }}
      {{ $scratch.Set "completed" true }}
      {{ range sort .CurrentSection.Pages ".Params.order" "asc"}}
        {{ if eq $url .Permalink }}
            {{ $scratch.Set "completed" false }}
        {{ end }}
        {{ $isCompleted := $scratch.Get "completed" }}
        <li {{ if eq $url .Permalink }}selected{{ end }} {{ if $isCompleted }}completed{{ end }}>
          <a href="{{ .Permalink }}">
            <span class="step">
              <span>{{ .Title }}</span>
            </span>
          </a>
        </li>
      {{ end }}
    </ol>
  </div>
</div>